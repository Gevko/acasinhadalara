<!-- src/app/features/contact/contact.html -->
<div class="contact-banner">
  <div class="container">
    <h1>{{ 'contact.title' | translate }}</h1>
  </div>
</div>

<section class="container contact-section">
  <div class="contact-info">
    <h2>{{ 'contact.get_in_touch' | translate }}</h2>
    <p>{{ 'contact.description' | translate }}</p>
    
    <div class="contact-methods">
      <div class="contact-method">
        <div class="contact-icon">
          <i class="fas fa-envelope"></i>
        </div>
        <div class="contact-details">
          <h3>{{ 'contact.email' | translate }}</h3>
          <p>{{email}}</p>
        </div>
      </div>
      
      <div class="contact-method">
        <div class="contact-icon">
          <i class="fas fa-phone"></i>
        </div>
        <div class="contact-details">
          <h3>{{ 'contact.phone' | translate }}</h3>
          <p>+351 123 456 789</p>
        </div>
      </div>
      
      <div class="contact-method">
        <div class="contact-icon">
          <i class="fas fa-map-marker-alt"></i>
        </div>
        <div class="contact-details">
          <h3>{{ 'contact.address' | translate }}</h3>
          <p>Gaeiras, Ã“bidos, Portugal</p>
        </div>
      </div>
    </div>
    
    <div class="social-media">
      <h3>{{ 'contact.follow_us' | translate }}</h3>
      <div class="social-icons">
        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
      </div>
    </div>
  </div>
  
  <div class="contact-form-container">
    <h2>{{ 'contact.send_message' | translate }}</h2>
    
    <div *ngIf="formSuccess" class="alert success">
      <i class="fas fa-check-circle"></i>
      {{ 'contact.success_message' | translate }}
    </div>
    
    <div *ngIf="formError" class="alert error">
      <i class="fas fa-exclamation-circle"></i>
      {{ errorMessage || 'contact.error_message' | translate }}
    </div>
    
    <!-- Updated form with Netlify attributes -->
    <form 
      [formGroup]="contactForm" 
      (ngSubmit)="onSubmit()" 
      class="contact-form"
      name="contact" 
      method="POST" 
      data-netlify="true" 
      netlify-honeypot="bot-field">
      
      <!-- Hidden fields for Netlify -->
      <input type="hidden" name="form-name" value="contact">
      <div hidden>
        <input name="bot-field" formControlName="botField">
      </div>
      
      <div class="form-group">
        <label for="name">{{ 'contact.form.name' | translate }} *</label>
        <input 
          type="text" 
          id="name" 
          name="name"
          formControlName="name"
          [class.invalid]="contactForm.get('name')?.invalid && (contactForm.get('name')?.touched || formSubmitted)">
        <div class="error-message" *ngIf="contactForm.get('name')?.invalid && (contactForm.get('name')?.touched || formSubmitted)">
          {{ getErrorMessage('name') }}
        </div>
      </div>
      
      <div class="form-group">
        <label for="email">{{ 'contact.form.email' | translate }} *</label>
        <input 
          type="email" 
          id="email" 
          name="email"
          formControlName="email"
          [class.invalid]="contactForm.get('email')?.invalid && (contactForm.get('email')?.touched || formSubmitted)">
        <div class="error-message" *ngIf="contactForm.get('email')?.invalid && (contactForm.get('email')?.touched || formSubmitted)">
          {{ getErrorMessage('email') }}
        </div>
      </div>
      
      <div class="form-group">
        <label for="phone">{{ 'contact.form.phone' | translate }}</label>
        <input 
          type="tel" 
          id="phone" 
          name="phone"
          formControlName="phone">
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="checkIn">{{ 'contact.form.check_in' | translate }}</label>
          <input 
            type="date" 
            id="checkIn" 
            name="checkIn"
            formControlName="checkIn" 
            [min]="today">
        </div>
        
        <div class="form-group">
          <label for="checkOut">{{ 'contact.form.check_out' | translate }}</label>
          <input 
            type="date" 
            id="checkOut" 
            name="checkOut"
            formControlName="checkOut" 
            [min]="today">
        </div>
      </div>
      
      <div class="form-group">
        <label for="guests">{{ 'contact.form.guests' | translate }}</label>
        <input 
          type="number" 
          id="guests" 
          name="guests"
          formControlName="guests" 
          min="1" 
          max="8">
      </div>
      
      <div class="form-group">
        <label for="message">{{ 'contact.form.message' | translate }} *</label>
        <textarea 
          id="message" 
          name="message"
          formControlName="message" 
          rows="5"
          [class.invalid]="contactForm.get('message')?.invalid && (contactForm.get('message')?.touched || formSubmitted)"></textarea>
        <div class="error-message" *ngIf="contactForm.get('message')?.invalid && (contactForm.get('message')?.touched || formSubmitted)">
          {{ getErrorMessage('message') }}
        </div>
      </div>
      
      <button 
        type="submit" 
        class="submit-button"
        [disabled]="isSubmitting">
        <span *ngIf="isSubmitting">
          <i class="fas fa-spinner fa-spin"></i>
        </span>
        {{ 'contact.form.submit' | translate }}
      </button>
    </form>
  </div>
</section>